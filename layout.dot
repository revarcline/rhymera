digraph rhymera {
    ratio = "compress";
    rankdir = LR;

    subgraph cluster_us {
        us01 [label = "user opens cli app"];

        us01 -> mn01;
    }

    subgraph cluster_me {
        label = "Menu";
        color = black
        mn01 [label = "user selects query, enters word"];
        mn02 [label = "user chooses rhyme"];
        mn03 [label = "user chooses prefix"];
        mn04 [label = "user chooses suffix"];
        mn05 [label = "user chooses related"];
        mn06 [label = "user chooses portmanteau"];
        mn07 [label = "display selectable results"];
        mn08 [label = "user quits program"];
        mn09 [label = "user runs query on selected word"];
        mn10 [label = "user copies word to clipboard"];

        mn01 -> mn02;
        mn01 -> mn03;
        mn01 -> mn04;
        mn01 -> mn05;
        mn01 -> mn06;

        mn09 -> mn02;
        mn09 -> mn03;
        mn09 -> mn04;
        mn09 -> mn05;
        mn09 -> mn06;


        mn07 -> mn09;
        mn07 -> mn08;
        mn07 -> mn10;
    }

    subgraph cluster_li {
        label = "List";
        color = black;

        subgraph cluster_rh {
            label = "Rhymes";
            color = black;
            rh01 [label = "init with word, function is constant"];
            rh02 [label = "create new RhymeBrain object w query"];
            rh03 [label = "query RhymeBrain object into results"];
            rh04 [label = "format results into list array from super"];

            mn02 -> rh01;
            rh01 -> rh02;
            rh02 -> rb01;
            rh03 -> rb02;
            rh04 -> mn07;
        }

        subgraph cluster_po {
            label = "Portmanteau";
            color = black;
            po01 [label = "init with word, function is constant"];
            po02 [label = "create new RhymeBrain object w query"];
            po03 [label = "query RhymeBrain object into results"];
            po04 [label = "format results into list array from super"];

            mn06 -> po01;
            po01 -> po02;
            po02 -> rb01;
            po03 -> rb02;
            po04 -> mn07;
        }

        subgraph cluster_pr {
            label = "Prefix";
            color = black;
            pr01 [label = "init with word, function is constant"];
            pr02 [label = "create new OneLook object w query"];
            pr03 [label = "query OneLook object into results"];
            pr04 [label = "format results into list array from super"];

            mn03 -> pr01;
            pr01 -> pr02;
            pr02 -> ol01;
            pr03 -> ol02;
            pr04 -> mn07;
        }
        
        subgraph cluster_su {
            label = "Suffix";
            color = black;
            su01 [label = "init with word, function is constant"];
            su02 [label = "create new OneLook object w query"];
            su03 [label = "query OneLook object into results"];
            su04 [label = "format results into list array from super"];

            mn04 -> su01;
            su01 -> su02;
            su02 -> ol01;
            su03 -> ol02;
            su04 -> mn07;
        }

        subgraph cluster_re {
            label = "Related";
            color = black;
            re01 [label = "init with word, function is constant"];
            re02 [label = "create new OneLook object w query"];
            re03 [label = "query OneLook object into results"];
            re04 [label = "format results into list array from super"];

            mn05 -> re01;
            re01 -> re02;
            re02 -> ol01;
            re03 -> ol02;
            re04 -> mn07;
        }

        li01 [label="defines correctly formed array for display @results"];
        li02 [label="sets attrs like @word"];
        
        li01 -> rh04;
        li01 -> po04;
        li01 -> re04;
        li01 -> su04;
        li01 -> pr04;

        li02 -> rh01;
        li02 -> po01;
        li02 -> re01;
        li02 -> su01;
        li02 -> pr01;
    }

    subgraph cluster_ol {
        label = "OneLook";
        color = black;
        ol01 [label="intialize with relevant uri elements"];
        ol02 [label="query html object and crawl with nokogiri"];
        ol03 [label="set @results to array of 40 words"];

        ol02 -> ol03;

        ol01 -> pr02;
        ol03 -> pr04;

        ol01 -> su02;
        ol03 -> su04;

        ol01 -> re02;
        ol03 -> re04;
    }

    subgraph cluster_rb {
        label = "RhymeBrain";
        color = black;
        rb01 [label = "initialize with function and word"]
        rb02 [label = "#query uses function and word vars to format uri"]
        rb03 [label = "opens uri and parses json object to @results"]

        rb02 -> rb03;

        rb01 -> rh02;
        rb03 -> rh04;

        rb01 -> po02;
        rb03 -> po04;
    }
}
